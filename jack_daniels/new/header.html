<head>
    <link href="style.css" rel="stylesheet" type="text/css">
</head>

<a href="index.html"><img src="pictures/logo.png" height="60px" align="left"/></a>
<div style="float: right; width: 300px;">
    <input type="button" value="Регистрация" id="registerButton" style="float: right;"/>
    <br clear="all"/>

    <!-- relative without taking space, see: https://stackoverflow.com/questions/6040005 -->
    <div style="position: relative; width: 0; height: 0;">
        <div style="position: absolute; display:none;" id="registerDialog" >

            <form action="" method="get" OnSubmit="return Validate(this);">
                <table style="background-color: rgb(116, 157, 195);">
                    <tr>
                        <td>User name:</td>
                        <td><input type="text" id="user"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Password:</td>
                        <td><input type="password" id="pass"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Repeat password:</td>
                        <td><input type="password" id="reppass"/>
                        </td>
                    </tr>
                    <tr>
                        <td>E-mail:</td>
                        <td><input type="text" id="mail"/>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="submit" value="Registration"/></td>
                        <td><input type="reset" value="Cancel"/>
                        </td>
                    </tr>
                </table>

            </form>

        </div>
    </div>
</div>
<br clear="all"/>

<div id="cssmenu" style="text-align:center;">
    <div style="display: inline-block;">
        <ul id="menu">

            <li><a href="rome.html">Распад Римской империи</a></li>
            <li><a href="crusades.html">Крестовые походы</a></li>
            <li><a href="war.html">Столетняя война</a></li>
            <li><a href="inquisition.html">Святая инквизиция</a></li>
            <li><a href="church.html">Раскол церкви</a></li>

        </ul>
    </div>
</div>

<script>

    var showDialogSmoothly = function(dialog) {
        registerDialog.style.opacity = 0;
        registerDialog.style.display = 'block';

        var opacier = function(opacity) {
            if (opacity <= 1) {
                registerDialog.style.opacity = opacity;
                setTimeout(_ => opacier(opacity + 0.05), 50);
            }
        };
        opacier(0);
    };

    var registerButton = document.getElementById('registerButton');
    registerButton.onclick = function() {
        var registerDialog = document.getElementById('registerDialog');
        var display = registerDialog.style.display;
        if (registerDialog.style.display === 'none') {
            showDialogSmoothly(registerDialog);
        } else {
            registerDialog.style.display = 'none';
        }
    };

    function Validate(obj){
        var user=obj.user.value;
        var password=obj.pass.value;
        var passagain=obj.reppass.value;
        var email=obj.mail.value;
        var errors="";

        if(user=="" || password=="" || passagain=="" || email==""){
            alert("Please fill all fields!!!!");
            return false;
        }

        if(password.length<6){
            errors+="Password is too short!!!\n";
        }

        if(password!=passagain){
            errors+="Passwords do not match!!!\n";
        }

        var reg=/^\w+@\w+\.\w{2,4}$/i;
        if(!reg.test(email)){
            errors+="E-mail is incorrect!!!\n";
        }



        if(errors==""){
            alert("All is OK!!!");
            return true;
        }

        else{
            alert(errors);
            return false;
        }



    }
</script>
