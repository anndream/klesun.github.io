<!DOCTYPE html>
<html xmlns = "http://www.w3.org/1999/xhtml">

<head>
	<link rel="stylesheet" type="text/css" href="/templates/main_page.css">

    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

    <!-- ==================== -->
    <!-- For midi playback <> -->
    <!-- ==================== -->

	<!-- TODO: think of a better way to play sound with software or dix the bugs (thread leak is obvious even at their web site! mudcu.be) -->

    <!--&lt;!&ndash; polyfill &ndash;&gt;-->
	<!--<script src="/libs/MIDI.js/inc/shim/Base64.js" type="text/javascript"></script>-->
	<!--<script src="/libs/MIDI.js/inc/shim/Base64binary.js" type="text/javascript"></script>-->
	<!--<script src="/libs/MIDI.js/inc/shim/WebAudioAPI.js" type="text/javascript"></script>-->
	<!--&lt;!&ndash; midi.js package &ndash;&gt;-->
	<!--<script src="/libs/MIDI.js/js/midi/audioDetect.js" type="text/javascript"></script>-->
	<!--<script src="/libs/MIDI.js/js/midi/gm.js" type="text/javascript"></script>-->
	<!--<script src="/libs/MIDI.js/js/midi/loader.js" type="text/javascript"></script>-->
	<!--<script src="/libs/MIDI.js/js/midi/plugin.audiotag.js" type="text/javascript"></script>-->
	<!--<script src="/libs/MIDI.js/js/midi/plugin.webaudio.js" type="text/javascript"></script>-->
	<!--<script src="/libs/MIDI.js/js/midi/plugin.webmidi.js" type="text/javascript"></script>-->
	<!--&lt;!&ndash; utils &ndash;&gt;-->
	<!--<script src="/libs/MIDI.js/js/util/dom_request_xhr.js" type="text/javascript"></script>-->
	<!--<script src="/libs/MIDI.js/js/util/dom_request_script.js" type="text/javascript"></script>-->

    <!-- ===================== -->
    <!-- For midi playback </> -->
    <!-- ===================== -->

	<!-- orthodox midi player -->
	<script type='text/javascript' src='/libs/midi.js'></script>

    <script src="/util/TableGenerator.js" type="text/javascript"></script> <!-- used in main_page.js -->
    <script src="/util/PianoLayoutPanel.js" type="text/javascript"></script> <!-- used in main_page.js -->
    <script src="/util/Playback.js" type="text/javascript"></script> <!-- used in main_page.js -->
    <script src="/templates/main_page.js" type="text/javascript"></script> <!-- requires TableGenerator.js; PianoLayoutPanel.js ! -->
</head>

<body>

<div class="main-cont" style="border: 1px solid;"  align="center">
	<h1 class="main-caption">Да будет такая Шмидузыка!</h1>

	<!-- @debug -->
	<input type="button" onClick="MIDIjs.play('/midiCollection/ichigos/assorted/0_a9b9_Terranigma - Europe (1).mid');" value="Play Europe!">
    <input type="button" onClick="MIDIjs.stop();" value="Stop MIDI Playback!">
	
	<div class="topic-links-cont">
		<a class="topic-option" href="/midiCollection">my midi collection</a>
        <a class="topic-option" href="">random midi player</a> <!-- tell you what: there are thousands midi-s, but not even 10th part of them is quality enough for being worth for you to waste time listening to them (u'r busy man, aint ya?). Help me filter em if you don't mind? -->
		<a class="topic-option" href="">MY music</a>
        <a class="topic-option" href="">tutorials</a>
		<a class="topic-option" href="">about</a>
	</div>
	<br/>

    <div id="pianoControlDiv" align="center">
        <div class="piano-side-div">
            <select style="float: right; margin-right: 10px;">
                <option value="oscillator">Oscillator</option>
                <option value="feulner">Feulner</option>
                <option value="mudcube">Mudcube</option>
            </select>
        </div>
        <div class="piano-cont">
            <canvas id="pianoLayoutPanel" width="420px" height="30px"></canvas>
        </div>
        <div class="piano-side-div">
            <input id="startDemoButton" type="button" value="Нажми и тебе будет хорошо"/>
        </div>
    </div>

	<table class="content-block-table">
	<tr>
		
	<td class="nostretch-td" valign="top">
	<div class="something-left-cont"></div>
	</td>
	
	<td class="nostretch-td" valign="top">
	<div class="main-middle-cont">
		<div id="oscillatorControlCont"></div>
        <br clear="all"/>
        <br/>
        <div style="background-color: white;">
            Sheet Music<br/>
            <h1 style="font-size: 50px;">Soon</h1>
        </div>
        <br/>
        <div style="background-color: white;">
            <p>Hi.</p>
            <p>This is site of the Great and Majestic Artur Klesun.</p>
        </div>
	</div>
	</td>
	
	<td valign="top">
	<div class="random-midi-list-cont"></div>
	</td>
	
	</tr>
	</table>
	
</div>
</body>

<script>

	// checking for ECMA 6 cuz nothing will work elsewhere
	var ECMA6 = false;
	setTimeout(function () {
        // will fire for any issue
		if (!ECMA6) {
			alert('Do you hate me? You want me to write \n"list.filter(function (a) { return a.isok; })" instead of just \n"list.filter(a => a.isok)" ?\n' + 
				'Please, install Chrome 45 or higher or whatever browser you use so it fitted ECMA 6 standard and then come back.');
		}
	}, 3000);

    setTimeout(function () {
        var a = b => b;
        ECMA6 = true;
    }, 100);

//	MIDI.loadPlugin({
//		soundfontUrl: "/libs/MIDI.js/examples/soundfont/",
//		instrument: "acoustic_grand_piano"
//	});

	var mainPage = MainPage($('#pianoLayoutPanel')); // defined in main_page.js

	var onLoad = function () {
		mainPage.init();
		mainPage.initOscillatorControl($('#oscillatorControlCont'));
		$('#startDemoButton').click(mainPage.playDemo);
	};

	window.addEventListener('load', onLoad, false);
	
</script>

</html>
