<html lang="en">
<head>
    <title>Show MAL DB</title>
    <meta charset="UTF-8"/>
    <script src="/libs/require.js"></script>
</head>
<body>

<main>
    <br/>
    <h3>Analyze <a href="http://myanimelist.net">MAL</a> database to filter overrated and find underrated animes</h3>
    <p>
        I have a <a href="/out/mal_dump.db">database dump</a> from myanimelist. I'm going experiment a bit to find some criteria that differ between good animes and bad animes.
        You know, animes in TOP on myanimelist are not always really that good, but you live only once and everything can not be watched.
    </p>

    <form class="analyze-request">
        <label>
            Select Anime:
            <input type="text" list="zhopa" disabled="1" value="Wait, please..." placeholder="Type here..."/>
            <datalist id="zhopa" class="analyzedAnime">
                <option disabled="1" selected="1">Please wait...</option>
            </datalist>
        </label>
        <button>Analyze!</button>
    </form>
    <div>
        <label><b>Processing Title:</b> <span class="title holder">None</span></label><br/>
        <label><b>Retrieved scores:</b> <span class="scores-retrieved holder">0</span></label><br/>
        <labe><span class="retrieval-status holder">Waiting for your request...</span></labe><br/>
    </div>
    <h3>Result:</h3>
    <div>
        <code class="result">
        </code>
    </div>
    <div>
        <canvas class="absolute-chart" width="800" height="300"></canvas>
    </div>
    <div class="table-cont">
        <h5>Participants</h5>
        <table>
            <thead>
                <th>#</th>
                <th>id</th>
                <th>login</th>
                <th>gender</th>
                <th>joined</th>
                <th>score</th>
                <th title="how much is this score different from user's personal average score">attitude</th>
                <th>personal avg.</th>
                <th>animes seen</th>
            </thead>
            <tbody class="scoring-users">
                <tr>
                    <td>1</td>
                    <td>123</td>
                    <td>some_login</td>
                    <td>Male</td>
                    <td>2014-05-07</td>
                    <td>8</td>
                    <td>+1.33</td>
                    <td>7.67</td>
                    <td>51</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>456</td>
                    <td>other_login</td>
                    <td>Male</td>
                    <td>2013-05-07</td>
                    <td>7</td>
                    <td>+0.53</td>
                    <td>6.47</td>
                    <td>214</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div>
        <canvas class="attitude-chart" width="800" height="300"></canvas>
    </div>
</main>

<script>
    let $$ = (s, parent) => [...(parent || document).querySelectorAll(s)];

    require(
        ['/src/entry/ShowMalDb.js'],
        (ShMaNs) => ShMaNs.ShowMalDb($$('main')[0])
    );
</script>

<style>
    main {
        padding-left: 40px;
        padding-right: 60px;
    }
    div.table-cont {
        width: 700px;
        max-height: 400px;
        overflow-y: auto;
        overflow-x: hidden;
        padding: 5px;
    }
    tr:hover {
        background-color: #e3f6ff;
    }
    table {
        border-collapse: collapse;
    }
    table td {
        padding: 4px;
        padding-top: 0px;
        padding-bottom: 0px;
        border: 1px solid black;
    }
</style>

</body>
</html>