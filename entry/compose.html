<head>
    <meta charset="utf-8"/>
    <script data-main="/entry/compose" src="/libs/require.js"></script>
</head>

<span id="playbackConfigDiv">
    Tempo: <input type="number" class="holder tempo" value="120" min="15" max="480"
                  onchange="this.value = Math.min(Math.max(this.value, this.min), this.max);"/>
    Loop Start: <input type="number" class="holder loopStart" value="0"/>
    Loop Times: <input type="number" class="holder loopTimes" value="0"/>
    <span id="visualConfigDiv">
        Tact Size: <input type="number" class="holder tactSize" value="1" min="0.25" max="16" step="0.25"
                          onchange="this.value = Math.min(Math.max(this.value, this.min), this.max);"/>
    </span>
    Synth: <select id="synthDropdown"></select>
    <span id="synthControl"></span>
    <br clear="all"/>
    <canvas id="pianoCanvas"></canvas>
</span>

<div id="sheetMusicDiv"></div>

<div style="display: flex;">
    <div id="presetListBlock" style="float: left"></div>
    <div style="flex: 1; margin-left: 20px; margin-top: 10px; background-color: #f8f8f8;">
        <div class="manualCont">
            <div style="width: 400px">
                <table>
                    <thead>
                        <th>To</th><th>Press</th>
                    </thead>
                    <tbody>
                        <tr><td>Enter Chords</td><td>Keys On Your Midi Device</td></tr>
                        <tr><td>Navigate</td><td>Arrow Keys / Home / End</td></tr>
                        <tr><td>Play</td><td>Space</td></tr>
                        <tr><td>Save Song</td><td>Ctrl-S</td></tr>
                        <tr><td>Open Song</td><td>Ctrl-O</td></tr>
                        <tr><td>Save Song As .mid File</td><td>Ctrl-E</td></tr>
                        <tr><td>Select Next Note</td><td>Shift</td></tr>
                        <tr><td>Add Pause</td>
                            <td>Pause Break <a class="comment">(Works Same As Adding Note From Midi Device)</a></td></tr>
                    </tbody>
                </table>
            </div>
            <div class="manualCont" style="flex: 1">
                <table>
                    <thead>
                        <tr><th colspan="2">Change Note In Chord (If Not Selected - Change Whole Chord)</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Increase Note Length Twice</td>
                            <td>[ <a class="comment">(Opening Square Bracket)</a> <a class="or">or</a> + <a class="comment">(Num Pad Plus)</a></td></tr>
                        <tr><td>Decrease Note Length Twice</td>
                            <td>] <a class="comment">(Closing Square Bracket)</a> <a class="or">or</a> - <a class="comment">(Num Pad Minus)</a></td></tr>
                        <tr><td>Put Dot / Undo Triplet</td>
                            <td>. <a class="comment">(Generic Dot)</a> <a class="or">or</a> * <a class="comment">(Num Pad Asterisk)</a></td></tr>
                        <tr><td>Remove Dot / Make Triplet</td>
                            <td>, <a class="comment">(Generic Comma)</a> <a class="or">or</a> / <a class="comment">(Num Pad Slash)</a></td></tr>

                        <tr><td>Delete Note</td><td>Delete / Backspace</td></tr>
                        <tr><td>Change Note Channel (Use Preset Table To Assign Other Instruments Than Piano To Channel Numbers)</td>
                            <td>Numbers 0..9 On Numpad</td></tr>
                        <tr><td>Append New Note To Chord</td>
                            <td>Key On Midi Device (Works When Any Note In Chord Is Selected)</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        <br clear="all"/>
        Note: may be outdated. For most recent key mapping see
        <a href="https://github.com/klesun/shmidusic.lv/blob/master/src/compose/Handler.ts#LC177">
            Handler.ts::focusedHandlers
        </a>
    </div>
</div>

<style>

    #synthControl { background-color: #f8f8ff; }
    #synthControl div {
        background-color: #e8e8ff;
        margin: 4px;
    }

    .manualCont {
        display: flex;
        background-color: #f8fff8;
    }
    .manualCont table {
        border-collapse: collapse;
        font-size: 11px;
    }
    .manualCont table th { background-color: #eef; }
    .manualCont table td,th {
        border: solid 1px green;
        padding-left: 5px;
        padding-right: 5px;
    }
    .manualCont table td:nth-child(odd) {
        max-width: 275px;
    }
    .manualCont table td:nth-child(even) { font-weight: bold; }
    .manualCont table td:nth-child(even) a.comment {
        font-weight: normal;
        color: #a00;
    }
    .manualCont table td:nth-child(even) a.or {
        font-weight: normal;
        color: #0a0;
    }

    /** @TODO: export this to js somehow */

    .channelColors [data-channel="0"] { color: rgb(0, 0, 0); } /* black */
    .channelColors [data-channel="1"] { color: rgb(192, 0, 0); } /* red */
    .channelColors [data-channel="2"] { color: rgb(0, 148, 0); } /* green */
    .channelColors [data-channel="3"] { color: rgb(60, 60, 255); } /* blue */
    .channelColors [data-channel="4"] { color: rgb(152, 152, 0); } /* yellow */
    .channelColors [data-channel="5"] { color: rgb(0, 152, 152); } /* cyan */
    .channelColors [data-channel="6"] { color: rgb(192, 0, 192); } /* magenta */
    .channelColors [data-channel="7"] { color: rgb(255, 128, 0); } /* orange */
    .channelColors [data-channel="8"] { color: rgb(91, 0, 255); } /* bluish magenta */
    .channelColors [data-channel="9"] { color: rgb(128, 128, 128); } /* drum */

    .channelColors [data-channel="10"] { color: rgb(127, 255, 0); } /* TODO: !!! */
    .channelColors [data-channel="11"] { color: rgb(255, 0, 255); } /* TODO: !!! */
    .channelColors [data-channel="12"] { color: rgb(0, 255, 0); } /* TODO: !!! */
    .channelColors [data-channel="13"] { color: rgb(0, 255, 0); } /* TODO: !!! */
    .channelColors [data-channel="14"] { color: rgb(0, 255, 0); } /* TODO: !!! */
    .channelColors [data-channel="15"] { color: rgb(0, 255, 0); } /* TODO: !!! */

    body {
        font-size: 12px;
        font-family: monospace;
    }
    #sheetMusicDiv {
        margin-top: 20px;
        min-height: 120px;
    }
    input[type="number"] {
        width: 60px;
        margin-right: 15px;
    }
    span {
        display: inline-block;
    }
    #sheetMusicDiv {
        outline-color: #eee;
    }

    #presetListBlock {
        margin: 2px;
    }
    #presetListBlock table { border-collapse: collapse; }
    #presetListBlock td {
        background-color: #f8f8f8;
        font-size: 10px;
        padding-top: 0px;
        padding-bottom: 0px;
        border: solid 1px #88f;
    }
    #presetListBlock input[type="checkbox"] {
        margin:0;
        margin-top: 1px;
        margin-left: 1px;
    }
    #presetListBlock select {
        height: 10px;
        margin: 0px;
        font-size: 10px;
        padding: 0px;
        border: none;
    }

    div.inlineBlock {
        float: left;
    }


</style>