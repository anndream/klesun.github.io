
<head>
	<meta charset="utf-8"/>
	<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="/libs/FileSaver.js" type="text/javascript"></script>

    <!-- auto-generated imports -->
    <script src="/util//Tools.js" type="text/javascript"></script>
    <script src="/util//Player.js" type="text/javascript"></script>
    <script src="/util//PlaybackControl.js" type="text/javascript"></script>
    <script src="/util//Playback.js" type="text/javascript"></script>
    <script src="/util//Compose.js" type="text/javascript"></script>
    <script src="/util//PianoLayoutPanel.js" type="text/javascript"></script>
    <script src="/util//TableGenerator.js" type="text/javascript"></script>
    <script src="/util//DataStructures.js" type="text/javascript"></script>
    <script src="/util/synths/MidiDevice.js" type="text/javascript"></script>
    <script src="/util/synths/ISynth.js" type="text/javascript"></script>
    <script src="/util/sheet_music/ShapeProvider.js" type="text/javascript"></script>
    <script src="/util/sheet_music/Supply.js" type="text/javascript"></script>
    <script src="/util/typescript/Shmidusicator.js" type="text/javascript"></script>
    <script src="/util/typescript/DataStructures.js" type="text/javascript"></script>
    <script src="/util/typescript/Tools.js" type="text/javascript"></script>
    <script src="/util/typescript/UnfairRandom.js" type="text/javascript"></script>
    <script src="/util/typescript/references.js" type="text/javascript"></script>
    <script src="/util/typescript/Reflect.js" type="text/javascript"></script>
    <script src="/util/typescript/Maybe.js" type="text/javascript"></script>
    <script src="/util/typescript/synths/ISynth.js" type="text/javascript"></script>
    <script src="/util/typescript/synths/Oscillator.js" type="text/javascript"></script>
    <script src="/util/typescript/synths/Fluid.js" type="text/javascript"></script>
    <script src="/util/typescript/compose/Handler.js" type="text/javascript"></script>
    <script src="/util/typescript/sheet_music/Painter.js" type="text/javascript"></script>
    <script src="/util/typescript/sheet_music/Control.js" type="text/javascript"></script>
    <script src="/util/flowOut/Linker.js" type="text/javascript"></script>
    <script src="/util/flowOut/GoogleTranslateAdapter.js" type="text/javascript"></script>
    <script src="/util/flowOut/Transeeker.js" type="text/javascript"></script>

</head>

<span id="playbackConfigDiv">
    Tempo: <input type="number" class="holder tempo" value="120" min="15" max="480"
                  onchange="this.value = Math.min(Math.max(this.value, this.min), this.max);"/>
    Loop Start: <input type="number" class="holder loopStart" value="0"/>
    Loop Times: <input type="number" class="holder loopTimes" value="0"/>
    <table class="channelListTable"></table>
</span>
<span id="visualConfigDiv">
    Tact Size: <input type="number" class="holder tactSize" value="1" min="0.25" max="16" step="0.25"
                      onchange="this.value = Math.min(Math.max(this.value, this.min), this.max);"/>
</span>

<div id="sheetMusicDiv"></div>

<script>

    var onLoad = function ()
    {
        var painter = Ns.SheetMusicPainter('sheetMusicDiv', $('#visualConfigDiv')[0]);
        painter.setEnabled(true);

        var handler = Ns.Compose.Handler(painter, $('#playbackConfigDiv')[0]);

        var sheetMusicCont = $('#sheetMusicDiv')[0];
        $(sheetMusicCont).attr('tabindex', 1);
        handler.hangKeyboardHandlers(sheetMusicCont);
        handler.hangGlobalKeyboardHandlers();

        $('body').click(function(e) {
            if (e.target.tagName.toLowerCase() !== 'input') {
                $(sheetMusicCont).focus();
            }
        });

        $(sheetMusicCont).focus();
    };

    window.addEventListener('load', onLoad, false);

</script>

<style>

    #sheetMusicDiv {
        margin-top: 20px;
        min-height: 120px;
    }
    input[type="number"] {
        width: 60px;
        margin-right: 15px;
    }
    span {
        display: inline-block;
    }
    #sheetMusicDiv {
        outline: none;
    }

</style>