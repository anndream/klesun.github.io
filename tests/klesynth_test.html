<!DOCTYPE html>


<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Violent Theremin</title>
	
	<!--[if le IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <script src="scripts/respond.js"></script>
    <![endif]-->
    
    
	<link href="styles/normalize.css" rel="stylesheet" type="text/css">
	
	<link href="styles/app.css" rel="stylesheet" type="text/css">
	
</head>
<body>
  <h1>Violent Theremin</h1>

    <button class="mute" data-muted="false">Mute</button>
    <button class="clear">Clear screen</button>
    <p>Use mouse or arrow keys to control theremin.</p>

    <canvas class="canvas">
      Your browser does not support HTML5 canvas
    </canvas>
	
</body>
</html>

<script type="text/javascript">      

// create web audio api context
var audioCtx = new (window.AudioContext || window.webkitAudioContext)();

// create Oscillator and gain node
var oscillator = audioCtx.createOscillator();
var oscilator2 = audioCtx.createOscillator();
var gainNode = audioCtx.createGain();

// connect oscillator to gain node to speakers

oscillator.connect(gainNode);
oscilator2.connect(gainNode);
gainNode.connect(audioCtx.destination);

// set options for the oscillator

var initialVol = 0.01;

oscillator.type = 'square';
oscillator.frequency.value = 3000; // value in hertz
oscillator.start(0);
gainNode.gain.value = initialVol;

// mute button

var mute = document.querySelector('.mute');

mute.onclick = function() {
  if(mute.getAttribute('data-muted') === 'false') {
    gainNode.disconnect(audioCtx.destination);
    mute.setAttribute('data-muted', 'true');
    mute.innerHTML = "Unmute";
  } else {
    gainNode.connect(audioCtx.destination);
    mute.setAttribute('data-muted', 'false');
    mute.innerHTML = "Mute";
  };
}

</script>